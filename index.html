<!DOCTYPE html>
<html lang="en" class="csstransforms csstransforms3d csstransitions">
<head>
	<title>Hacking the Gender Gap Timeline</title>

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="bootstrap.css">

	<!-- My files -->
	<link rel="stylesheet" href="style.css" />
	<script type="text/javascript" src="data.js"></script>
	<! -- end My Files -->

	<!-- jQuery -->
	<!-- jQuery for offline use -->
	<!--<script type="text/javascript" src="jquery-1.7.1.min.js"></script>-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
	<!-- Isotope -->
	<script src="jquery.isotope.js"></script>

	<!-- Bootstrap JavaScript -->
	<script type="text/javascript" src="bootstrap.js"></script>
</head>
<body>
	<div class="container">
		<div class="navbar navbar-fixed-top">
    		<div class="navbar-inner">
    			<a class="brand" href="http://www.thehacktory.org/">The Hacktory</a>
    		</div>
    	</div>
	</div>
	<div class="container">
		<div class="jumbotron hero-unit">
			<h2>Hacking the Gender Gap</h2>
			<h1>Timeline</h1>
		</div>
	<div class="row-fluid">
	<div class="span12">
		<!-- TODO: data-toggle="buttons-radio" here not working due to JavaScript conflict between Isotope and Bootstrap? -->
	    <div id="sort-by" class="btn-group pull-right" data-toggle="buttons-radio">
		  <button class="btn"><a href="#year">Order by Year</a></button>
		  <button class="btn"><a href="#age">Order by Age</a></button>
		</div>
	</div>
	</div>
	<div class="row-fluid">
	<div class="span12">
		<!-- TODO: data-toggle="buttons-radio" here not working due to JavaScript conflict between Isotope and Bootstrap? -->
	    <div id="filters" class="btn-group pull-right" data-toggle="buttons-radio">
		  <button class="btn"><a href="#" data-filter="*">Show All</a></button>
		  <button class="btn"><a href="#" data-filter=".computer">Computers</a></button>
		  <button class="btn"><a href="#" data-filter=".family">Family</a></button>
		  <button class="btn"><a href="#" data-filter=".power_tools">Power Tools</a></button>
		  <button class="btn"><a href="#" data-filter=".programs">Programs</a></button>
		  <button class="btn"><a href="#" data-filter=".CAD">CAD</a></button>
		  <button class="btn"><a href="#" data-filter=".website">Website</a></button>
		</div>
	</div>
	</div>
	<div class="row-fluid">
	<div class="span12">
	    <div class="row-fluid">    	
			<div id ="pos_ex" class="experiences column span6"><h1 class="well well-small">Positive Experiences</h1><div class="row-fluid"><div id="c1" class="container isotope span12"></div></div></div>
			<div id ="neg_ex" class="experiences column span6"><h1 class="well well-small">Negative Experiences</h1><div class="row-fluid"><div id="c2" class="container isotope span12"></div></div></div>
	    </div>
 	</div>
 	</div>
 	</div>
 	</div>
	<script>
      	var $c1 = $('#c1');
      	var $c2 = $('#c2');
      
      	$c1.isotope({
	        itemSelector: '.timepoint',
	        layoutMode: 'straightDown',
	        filter: '*'
	    });

      	$c2.isotope({
	        itemSelector: '.timepoint',
	        layoutMode: 'straightDown',
	        filter: '*'
	    });

      	// setting up sorting...
      	$c1.isotope({
			getSortData : {
			year : function ( $elem ) {
			  return parseInt($elem.find('.year').text());
			},
			age : function ( $elem ) {
			  return parseInt($elem.find('.age').text());
			}
			}
		});

		$c2.isotope({
			getSortData : {
			year : function ( $elem ) {
			  return parseInt($elem.find('.year').text());
			},
			age : function ( $elem ) {
			  return parseInt($elem.find('.age').text());
			}
			}
		});

		$('#sort-by a').click(function(){
			// get href attribute, minus the '#'
			var sortName = $(this).attr('href').slice(1);
			$c1.isotope({ sortBy : sortName });
			$c2.isotope({ sortBy : sortName });
			return false;
		});

		$('#filters a').click(function() {
			var selector = $(this).attr('data-filter');
			$c1.isotope({filter: selector});
			$c2.isotope({filter: selector});
			return false;
		});

	for (i = 0; i < data.length; i++) {
		pol = data[i].Polarity;
		age = data[i].Age;
		gender = data[i].Gender;
		txt = data[i].TimelineText;
		tag = data[i].Tag.replace(',', '');
		evnt = data[i].Event;
		rawYr = data[i].StartDate;
		rawYr2 = rawYr.replace('1/1/', '');
		yr = rawYr2.replace(' 0:00:00', '');
		var newPosItems;
		var newNegItems;
		if (pol === "positive") {
			newPosItems = newPosItems + '<div class="row-fluid"><div class="alert alert-success span12 timepoint positive ' + tag + '"><h3 class="year">' + yr + '</h3><p>Age <span class="age">' + age + '</span></p><p>' + txt + '</p></div></div>';
		}
		else {
			newNegItems = newNegItems + '<div class="row-fluid"><div class=" alert alert-error span12 timepoint negative ' + tag + '"><h3 class="year">' + yr + '</h3><p>Age <span class="age">' + age + '</span></p><p>' + txt + '</p></div></div>';
		}
	};
	$('#c1').isotope( 'insert', $(newPosItems) );
	$('#c2').isotope( 'insert', $(newNegItems) );
 	</script>
</body>
</html>